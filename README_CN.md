# å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç¯å¢ƒé›†åˆ (MARL Environments)

## ğŸ“– ç®€ä»‹

æœ¬æ–‡ä»¶å¤¹åŒ…å«äº†ä¸€å¥—ä¸“ä¸ºå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ (MARL)è®¾è®¡çš„ç¯å¢ƒé›†åˆã€‚æ‰€æœ‰ç¯å¢ƒéƒ½éµå¾ªç»Ÿä¸€çš„æ¥å£è§„èŒƒï¼Œæ”¯æŒé›†ä¸­å¼è®­ç»ƒåˆ†å¸ƒå¼æ‰§è¡Œ(CTDE)ç®—æ³•ï¼Œå¦‚QMIXã€VDNã€MADDPGç­‰ã€‚

## ğŸ¯ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ (æ¨è Ubuntu 22.04/24.04)
- **Pythonç‰ˆæœ¬**: Python 3.8+
- **æ ¸å¿ƒä¾èµ–**: NumPy, Gymnasium, Pygame, Matplotlib

## ğŸ—ï¸ ç¯å¢ƒåˆ—è¡¨

### 1. CM (Collaborative Moving) - åä½œæ¬è¿ç¯å¢ƒ

**ç¯å¢ƒæè¿°**:  
ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„å¤šæ™ºèƒ½ä½“åä½œç¯å¢ƒï¼Œæ™ºèƒ½ä½“éœ€è¦åˆä½œå°†ä¸€ä¸ª2Ã—2çš„ç®±å­æ¨åˆ°æŒ‡å®šçš„ç›®æ ‡åŒºåŸŸã€‚

**æ ¸å¿ƒç‰¹ç‚¹**:
- ğŸ¤ **åä½œæœºåˆ¶**: å¤šä¸ªæ™ºèƒ½ä½“éœ€è¦ä»ä¸åŒä¾§é¢æ¨ç®±å­ï¼ŒæˆåŠŸç‡éšåä½œäººæ•°å¢åŠ 
- ğŸ® **ç®€å•æ“ä½œ**: 5ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆåœç•™ã€ä¸Šä¸‹å·¦å³ç§»åŠ¨ï¼‰
- ğŸ† **å›¢é˜Ÿå¥–åŠ±**: æ‰€æœ‰æ™ºèƒ½ä½“è·å¾—ç›¸åŒçš„å›¢é˜Ÿå¥–åŠ±
- âš™ï¸ **éš¾åº¦å¯é…**: æ”¯æŒeasyã€normalã€hardä¸‰ç§éš¾åº¦çº§åˆ«
- ğŸ‘¥ **æ™ºèƒ½ä½“æ•°é‡**: 2-4ä¸ªæ™ºèƒ½ä½“ï¼ˆå¯é…ç½®ï¼‰
- ğŸ“ **ç½‘æ ¼å¤§å°**: 7Ã—7ç½‘æ ¼ï¼ˆå¯é…ç½®ï¼‰

**å…³é”®å‚æ•°**:
- åŠ¨ä½œç©ºé—´: 5ä¸ªç¦»æ•£åŠ¨ä½œ
- è§‚å¯Ÿç©ºé—´: 6 + 2Ã—(n_agents-1) ç»´å‘é‡
- æœ€å¤§æ­¥æ•°: 50-100æ­¥ï¼ˆæ ¹æ®éš¾åº¦ï¼‰

**æ–‡ä»¶**:
- `env_cm.py`: åŸºç¡€ç¯å¢ƒå®ç°
- `env_cm_ctde.py`: CTDEå…¼å®¹ç‰ˆæœ¬
- `core.py`: æ ¸å¿ƒç±»å®šä¹‰
- `config.py`: é…ç½®ç®¡ç†
- `renderer.py`: å¯è§†åŒ–æ¸²æŸ“

---

### 2. DEM (Dynamic Escort Mission) - åŠ¨æ€æŠ¤é€ä»»åŠ¡ç¯å¢ƒ

**ç¯å¢ƒæè¿°**:  
ä¸€ä¸ªå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç¯å¢ƒï¼Œæ™ºèƒ½ä½“éœ€è¦åŠ¨æ€å½¢æˆè§’è‰²æ¥æŠ¤é€VIPç©¿è¶Šå±é™©åŒºåŸŸï¼ŒåŒæ—¶åº”å¯¹å„ç§å¨èƒã€‚

**æ ¸å¿ƒç‰¹ç‚¹**:
- ğŸ­ **è§’è‰²æ¶Œç°**: æ™ºèƒ½ä½“è‡ªç„¶å½¢æˆé˜²å¾¡è€…ã€æŠ¤å«è€…ã€ä¾¦å¯Ÿè€…ç­‰è§’è‰²
- ğŸ—ºï¸ **å¤æ‚åœ°å½¢**: æ²³æµå’Œæ£®æ—å½±å“ç§»åŠ¨å’Œæˆ˜æ–—
- ğŸ¯ **åŠ¨æ€å¨èƒ**: æ•Œäººæ ¹æ®VIPçŠ¶æ€è‡ªé€‚åº”ç”Ÿæˆ
- ğŸ’¬ **é€šä¿¡æœºåˆ¶**: æ”¯æŒæ™ºèƒ½ä½“ä¹‹é—´çš„ä¿¡æ¯äº¤æµ
- ğŸ¥ **VIPä¿æŠ¤**: æ ¸å¿ƒç›®æ ‡æ˜¯ä¿æŠ¤VIPå®‰å…¨åˆ°è¾¾ç›®çš„åœ°
- ğŸ‘¥ **æ™ºèƒ½ä½“æ•°é‡**: 3ä¸ªç‰¹ç§éƒ¨é˜Ÿæ™ºèƒ½ä½“ï¼ˆå¯é…ç½®ï¼‰
- ğŸ“ **ç½‘æ ¼å¤§å°**: 10Ã—12 æˆ– 12Ã—12ï¼ˆæ ¹æ®éš¾åº¦ï¼‰

**å…³é”®å‚æ•°**:
- åŠ¨ä½œç©ºé—´: 10ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆç§»åŠ¨ã€æ”»å‡»ã€è§‚å¯Ÿã€å®ˆæŠ¤ã€é€šä¿¡ç­‰ï¼‰
- è§‚å¯Ÿç©ºé—´: çº¦60ç»´å‘é‡ï¼ˆåŒ…å«è‡ªèº«çŠ¶æ€ã€VIPçŠ¶æ€ã€é˜Ÿå‹çŠ¶æ€ã€å¨èƒçŠ¶æ€ç­‰ï¼‰
- å…¨å±€çŠ¶æ€ç»´åº¦: 41ç»´
- æœ€å¤§æ­¥æ•°: 100-200æ­¥ï¼ˆæ ¹æ®éš¾åº¦ï¼‰

**æ–‡ä»¶**:
- `env_dem.py`: åŸºç¡€ç¯å¢ƒå®ç°
- `env_dem_ctde.py`: CTDEå…¼å®¹ç‰ˆæœ¬
- `core.py`: æ ¸å¿ƒç±»ï¼ˆAgentã€VIPã€Threatç­‰ï¼‰
- `config.py`: é…ç½®ç®¡ç†
- `renderer.py`: å¯è§†åŒ–æ¸²æŸ“

---

### 3. HRG (Heterogeneous Resource Gathering) - å¼‚æ„èµ„æºæ”¶é›†ç¯å¢ƒ

**ç¯å¢ƒæè¿°**:  
ä¸€ä¸ªå¼‚æ„æ™ºèƒ½ä½“å›¢é˜Ÿåä½œæ”¶é›†èµ„æºçš„ç¯å¢ƒï¼Œä¸åŒè§’è‰²çš„æ™ºèƒ½ä½“å…·æœ‰ä¸åŒçš„èƒ½åŠ›å’ŒèŒè´£ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**:
- ğŸ” **å¼‚æ„è§’è‰²**: ä¾¦å¯Ÿå…µã€å·¥äººã€è¿è¾“è½¦ä¸‰ç§ä¸åŒè§’è‰²
- ğŸ’° **èµ„æºç®¡ç†**: é‡‘å¸å’Œæœ¨æä¸¤ç§èµ„æºï¼Œä»·å€¼å’Œé‡‡é›†éš¾åº¦ä¸åŒ
- ğŸ‘ï¸ **éƒ¨åˆ†å¯è§‚æµ‹**: ä¸åŒè§’è‰²å…·æœ‰ä¸åŒçš„è§†é‡èŒƒå›´
- ğŸš§ **éšœç¢ç‰©**: éšæœºåˆ†å¸ƒçš„ä¸å¯é€šè¡ŒåŒºåŸŸ
- ğŸ­ **åŸºåœ°ç³»ç»Ÿ**: èµ„æºéœ€è¦è¿å›åŸºåœ°æ‰èƒ½è·å¾—å¥–åŠ±
- ğŸ‘¥ **æ™ºèƒ½ä½“é…ç½®**: 2ä¸ªä¾¦å¯Ÿå…µ + 3ä¸ªå·¥äºº + 1ä¸ªè¿è¾“è½¦
- ğŸ“ **ç½‘æ ¼å¤§å°**: 10Ã—10ç½‘æ ¼ï¼ˆå¯é…ç½®ï¼‰

**å…³é”®å‚æ•°**:
- åŠ¨ä½œç©ºé—´: 8ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆç§»åŠ¨ã€é‡‡é›†ã€ä¼ è¾“ã€å­˜æ”¾ã€ç­‰å¾…ï¼‰
- è§‚å¯Ÿç©ºé—´: 80ç»´å‘é‡ï¼ˆè‡ªèº«çŠ¶æ€ã€è§†é‡å†…å®ä½“ã€å…¨å±€ä¿¡æ¯ï¼‰
- å…¨å±€çŠ¶æ€ç»´åº¦: 41ç»´
- æœ€å¤§æ­¥æ•°: 200-300æ­¥ï¼ˆæ ¹æ®éš¾åº¦ï¼‰
- èµ„æºé…ç½®: 3ä¸ªé‡‘çŸ¿ï¼ˆä»·å€¼10/å•ä½ï¼‰+ 10ä¸ªæœ¨æï¼ˆä»·å€¼2/å•ä½ï¼‰

**æ–‡ä»¶**:
- `env_hrg.py`: åŸºç¡€ç¯å¢ƒå®ç°
- `env_hrg_ctde.py`: CTDEå…¼å®¹ç‰ˆæœ¬
- `core.py`: æ ¸å¿ƒç±»ï¼ˆAgentã€Resourceç­‰ï¼‰
- `config.py`: é…ç½®ç®¡ç†
- `renderer.py`: å¯è§†åŒ–æ¸²æŸ“

---

### 4. MSFS (Multi-agent Smart Factory Scheduling) - æ™ºèƒ½åˆ¶é€ æµç¨‹è°ƒåº¦ç¯å¢ƒ

**ç¯å¢ƒæè¿°**:  
ä¸€ä¸ªæ™ºèƒ½åˆ¶é€ ç¯å¢ƒï¼Œæœºå™¨äººæ™ºèƒ½ä½“éœ€è¦åä½œå¤„ç†è®¢å•ï¼Œé€šè¿‡ä¸“ä¸šåŒ–å¥–åŠ±ä¿¡å·è‡ªç„¶å½¢æˆè§’è‰²ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**:
- ğŸ­ **åˆ¶é€ æµç¨‹**: åŸææ–™ â†’ ç»„è£… â†’ åŒ…è£…ä¸‰ä¸ªå·¥ä½œç«™
- ğŸ“¦ **è®¢å•ç³»ç»Ÿ**: æ ‡å‡†è®¢å•å’Œç´§æ€¥è®¢å•ä¸¤ç§ç±»å‹
- ğŸ¤– **è§’è‰²åˆ†åŒ–**: æ™ºèƒ½ä½“é€šè¿‡ä¸“ä¸šåŒ–å½¢æˆé‡‡é›†è€…ã€ç»„è£…è€…ã€åŒ…è£…è€…è§’è‰²
- âš¡ **åŠ¨ä½œå†·å´**: ç§»åŠ¨å’Œå¤„ç†éƒ½æœ‰å†·å´æ—¶é—´é™åˆ¶
- ğŸ“Š **åˆ©ç”¨ç‡è¿½è¸ª**: è·Ÿè¸ªå·¥ä½œç«™å’Œæ™ºèƒ½ä½“çš„åˆ©ç”¨ç‡
- ğŸ‘¥ **æ™ºèƒ½ä½“æ•°é‡**: 6ä¸ªæœºå™¨äººï¼ˆå¯é…ç½®ï¼‰
- ğŸ¢ **å·¥ä½œç«™**: 3ä¸ªå·¥ä½œç«™ï¼ˆåŸææ–™ã€ç»„è£…ã€åŒ…è£…ï¼‰

**å…³é”®å‚æ•°**:
- åŠ¨ä½œç©ºé—´: 8ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆç§»åŠ¨åˆ°å·¥ä½œç«™ã€æ‹¾å–ã€æ”¾ç½®ã€å¤„ç†ç­‰ï¼‰
- è§‚å¯Ÿç©ºé—´: 24ç»´å‘é‡ï¼ˆè‡ªèº«çŠ¶æ€ã€å…¨å±€ä¿¡æ¯ã€é˜Ÿå‹ä¿¡æ¯ï¼‰
- å…¨å±€çŠ¶æ€ç»´åº¦: 42ç»´
- æœ€å¤§æ­¥æ•°: 200-300æ­¥ï¼ˆæ ¹æ®éš¾åº¦ï¼‰
- è®¢å•ç”Ÿæˆ: åŠ¨æ€ç”Ÿæˆï¼Œæ ‡å‡†è®¢å•å’Œç´§æ€¥è®¢å•

**æ–‡ä»¶**:
- `env_msfs.py`: åŸºç¡€ç¯å¢ƒå®ç°
- `env_msfs_ctde.py`: CTDEå…¼å®¹ç‰ˆæœ¬
- `core.py`: æ ¸å¿ƒç±»ï¼ˆOrderã€Workstationã€Agentç­‰ï¼‰
- `config.py`: é…ç½®ç®¡ç†
- `renderer.py`: å¯è§†åŒ–æ¸²æŸ“

---

### 5. SMAC (StarCraft Multi-Agent Challenge) - æ˜Ÿé™…äº‰éœ¸å¤šæ™ºèƒ½ä½“æŒ‘æˆ˜ç¯å¢ƒå°è£…

**ç¯å¢ƒæè¿°**:  
åŸºäºSMACåº“çš„å°è£…å™¨ï¼Œæä¾›ä¸å…¶ä»–ç¯å¢ƒç»Ÿä¸€çš„æ¥å£ï¼Œç”¨äºæ˜Ÿé™…äº‰éœ¸IIçš„å¤šæ™ºèƒ½ä½“å¯¹æˆ˜åœºæ™¯ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**:
- âš”ï¸ **çœŸå®æˆ˜æ–—**: åŸºäºæ˜Ÿé™…äº‰éœ¸IIæ¸¸æˆå¼•æ“
- ğŸ—ºï¸ **å¤šç§åœ°å›¾**: æ”¯æŒ8mã€3sã€2s3zã€MMMã€corridorç­‰æ ‡å‡†åœ°å›¾
- ğŸ¯ **å¼‚æ„å•ä½**: ä¸åŒå•ä½ç±»å‹å…·æœ‰ä¸åŒèƒ½åŠ›
- ğŸ”„ **ç»Ÿä¸€æ¥å£**: ä¸DEM/HRG/MSFSç¯å¢ƒæ¥å£ä¸€è‡´
- ğŸ® **åŠ¨ä½œæ©ç **: æ”¯æŒåŠ¨ä½œå¯ç”¨æ€§æ£€æµ‹
- ğŸ‘¥ **æ™ºèƒ½ä½“æ•°é‡**: 3-20ä¸ªï¼ˆæ ¹æ®åœ°å›¾ï¼‰
- ğŸŒŸ **æ ‡å‡†åŸºå‡†**: ä¸šç•Œå¹¿æ³›ä½¿ç”¨çš„MARLåŸºå‡†ç¯å¢ƒ

**å…³é”®å‚æ•°**:
- åŠ¨ä½œç©ºé—´: çº¦14ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆæ ¹æ®åœ°å›¾å˜åŒ–ï¼‰
- è§‚å¯Ÿç©ºé—´: çº¦80ç»´å‘é‡ï¼ˆæ ¹æ®åœ°å›¾å˜åŒ–ï¼‰
- æœ€å¤§æ­¥æ•°: æ ¹æ®åœ°å›¾é¢„è®¾
- éœ€è¦StarCraft IIå’ŒSMACåº“

**æ–‡ä»¶**:
- `env_smac.py`: SMACå°è£…å™¨å®ç°
- `env_smac_ctde.py`: CTDEå…¼å®¹ç‰ˆæœ¬
- `config.py`: é…ç½®ç®¡ç†
- `demo_wrapper.py`: æ¼”ç¤ºåŒ…è£…å™¨

---

## ğŸ”§ ç»Ÿä¸€æ¥å£è®¾è®¡

æ‰€æœ‰ç¯å¢ƒéƒ½éµå¾ªä»¥ä¸‹ç»Ÿä¸€æ¥å£è§„èŒƒï¼š

### åŸºç¡€ç¯å¢ƒæ¥å£

```python
# é‡ç½®ç¯å¢ƒ
observations = env.reset()
# è¿”å›: Dict[agent_id, np.ndarray]

# æ‰§è¡ŒåŠ¨ä½œ
observations, rewards, dones, infos = env.step(actions)
# å‚æ•°: actions: Dict[agent_id, int]
# è¿”å›: observations, rewards, dones, infos (æ‰€æœ‰éƒ½æ˜¯å­—å…¸æ ¼å¼)

# è·å–å¯ç”¨åŠ¨ä½œ
avail_actions = env.get_avail_actions(agent_id)

# è·å–ç¯å¢ƒä¿¡æ¯
env_info = env.get_env_info()

# å…³é—­ç¯å¢ƒ
env.close()
```

### CTDEç¯å¢ƒæ¥å£

CTDEï¼ˆé›†ä¸­å¼è®­ç»ƒåˆ†å¸ƒå¼æ‰§è¡Œï¼‰ç¯å¢ƒåœ¨åŸºç¡€æ¥å£ä¹‹ä¸Šå¢åŠ äº†ï¼š

```python
# è·å–å…¨å±€çŠ¶æ€
global_state = env.get_global_state()
# è¿”å›: np.ndarray

# åœ¨infoä¸­åŒ…å«å…¨å±€çŠ¶æ€
obs, rewards, dones, infos = env.step(actions)
global_state = infos['global_state']

# æ”¯æŒçš„å…¨å±€çŠ¶æ€ç±»å‹
# - "concat": æ‹¼æ¥æ‰€æœ‰æ™ºèƒ½ä½“è§‚å¯Ÿ
# - "mean": å¹³å‡æ± åŒ–
# - "max": æœ€å¤§æ± åŒ–
# - "attention": åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„çŠ¶æ€
```

---

## ğŸ“¦ ç›®å½•ç»“æ„

```
Env/
â”œâ”€â”€ CM/                          # åä½œæ¬è¿ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_cm.py               # åŸºç¡€ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_cm_ctde.py          # CTDEç‰ˆæœ¬
â”‚   â”œâ”€â”€ core.py                 # æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ config.py               # é…ç½®
â”‚   â”œâ”€â”€ renderer.py             # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ test_env.py             # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ README.md               # è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ DEM/                         # åŠ¨æ€æŠ¤é€ä»»åŠ¡ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_dem.py              # åŸºç¡€ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_dem_ctde.py         # CTDEç‰ˆæœ¬
â”‚   â”œâ”€â”€ core.py                 # æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ config.py               # é…ç½®
â”‚   â”œâ”€â”€ renderer.py             # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ test_env.py             # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ README.md               # è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ HRG/                         # å¼‚æ„èµ„æºæ”¶é›†ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_hrg.py              # åŸºç¡€ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_hrg_ctde.py         # CTDEç‰ˆæœ¬
â”‚   â”œâ”€â”€ core.py                 # æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ config.py               # é…ç½®
â”‚   â”œâ”€â”€ renderer.py             # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ test_env.py             # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ README.md               # è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ MSFS/                        # æ™ºèƒ½åˆ¶é€ è°ƒåº¦ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_msfs.py             # åŸºç¡€ç¯å¢ƒ
â”‚   â”œâ”€â”€ env_msfs_ctde.py        # CTDEç‰ˆæœ¬
â”‚   â”œâ”€â”€ core.py                 # æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ config.py               # é…ç½®
â”‚   â”œâ”€â”€ renderer.py             # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ test_env.py             # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ README.md               # è¯¦ç»†æ–‡æ¡£ï¼ˆå¾…è¡¥å……ï¼‰
â”‚
â”œâ”€â”€ SMAC/                        # æ˜Ÿé™…äº‰éœ¸ç¯å¢ƒå°è£…
â”‚   â”œâ”€â”€ env_smac.py             # SMACå°è£…å™¨
â”‚   â”œâ”€â”€ env_smac_ctde.py        # CTDEç‰ˆæœ¬
â”‚   â”œâ”€â”€ config.py               # é…ç½®
â”‚   â”œâ”€â”€ test_env.py             # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ README.md               # è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ doc/                         # ç¯å¢ƒæ–‡æ¡£å’Œæ•™ç¨‹
â”‚   â”œâ”€â”€ CMç®€ä»‹.md
â”‚   â”œâ”€â”€ DEMç®€ä»‹.md
â”‚   â”œâ”€â”€ HRGç®€ä»‹.md
â”‚   â”œâ”€â”€ MSFSç®€ä»‹.md
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ CM_Tutorial.ipynb           # CMç¯å¢ƒæ•™ç¨‹
â”œâ”€â”€ DEM_environment_tutorial.ipynb  # DEMç¯å¢ƒæ•™ç¨‹
â”œâ”€â”€ HRG_Tutorial.ipynb          # HRGç¯å¢ƒæ•™ç¨‹
â”œâ”€â”€ MSFS_environment_tutorial.ipynb # MSFSç¯å¢ƒæ•™ç¨‹
â”œâ”€â”€ SMAC_Wrapper_Tutorial.ipynb # SMACå°è£…å™¨æ•™ç¨‹
â”‚
â”œâ”€â”€ verify_dem_environment.py   # DEMç¯å¢ƒéªŒè¯è„šæœ¬
â”œâ”€â”€ verify_hrg_environment.py   # HRGç¯å¢ƒéªŒè¯è„šæœ¬
â”œâ”€â”€ verify_msfs_environment.py  # MSFSç¯å¢ƒéªŒè¯è„šæœ¬
â”œâ”€â”€ run_dem_validation.py       # DEMéªŒè¯è¿è¡Œ
â”œâ”€â”€ run_hrg_validation.py       # HRGéªŒè¯è¿è¡Œ
â”œâ”€â”€ run_msfs_validation.py      # MSFSéªŒè¯è¿è¡Œ
â”‚
â””â”€â”€ README_CN.md                # æœ¬æ–‡ä»¶ï¼ˆä¸­æ–‡ç‰ˆï¼‰
```

---

## ğŸ“ å¿«é€Ÿå¼€å§‹

### 1. CMç¯å¢ƒç¤ºä¾‹

```python
from Env.CM import create_cm_env

# åˆ›å»ºç¯å¢ƒ
env = create_cm_env(difficulty="easy")

# é‡ç½®ç¯å¢ƒ
observations = env.reset()

# è¿è¡Œä¸€ä¸ªå›åˆ
for step in range(100):
    actions = {agent_id: env.action_space.sample() 
               for agent_id in env.agent_ids}
    obs, rewards, dones, infos = env.step(actions)
    
    if any(dones.values()):
        break

env.close()
```

### 2. DEMç¯å¢ƒç¤ºä¾‹

```python
from Env.DEM import create_dem_env

# åˆ›å»ºç¯å¢ƒ
env = create_dem_env(difficulty="normal")

# é‡ç½®ç¯å¢ƒ
observations = env.reset()

# è¿è¡Œä¸€ä¸ªå›åˆ
for step in range(200):
    actions = {agent_id: env.action_space.sample() 
               for agent_id in env.agent_ids}
    obs, rewards, dones, infos = env.step(actions)
    
    if any(dones.values()):
        break

env.close()
```

### 3. HRGç¯å¢ƒç¤ºä¾‹

```python
from Env.HRG import create_hrg_env

# åˆ›å»ºç¯å¢ƒ
env = create_hrg_env(difficulty="normal")

# é‡ç½®ç¯å¢ƒ
observations = env.reset()

# è¿è¡Œä¸€ä¸ªå›åˆ
for step in range(200):
    actions = {agent_id: env.action_space.sample() 
               for agent_id in env.agent_ids}
    obs, rewards, dones, infos = env.step(actions)
    
    if any(dones.values()):
        break

env.close()
```

### 4. MSFSç¯å¢ƒç¤ºä¾‹

```python
from Env.MSFS import create_msfs_env

# åˆ›å»ºç¯å¢ƒ
env = create_msfs_env(difficulty="normal")

# é‡ç½®ç¯å¢ƒ
observations = env.reset()

# è¿è¡Œä¸€ä¸ªå›åˆ
for step in range(200):
    actions = {agent_id: env.action_space.sample() 
               for agent_id in env.agent_ids}
    obs, rewards, dones, infos = env.step(actions)
    
    if any(dones.values()):
        break

env.close()
```

### 5. CTDEç¯å¢ƒç¤ºä¾‹ï¼ˆé€‚ç”¨äºQMIXç­‰ç®—æ³•ï¼‰

```python
from Env.CM import create_cm_ctde_env

# åˆ›å»ºCTDEç¯å¢ƒ
env = create_cm_ctde_env(
    difficulty="normal_ctde",
    global_state_type="concat"
)

# é‡ç½®ç¯å¢ƒå¹¶è·å–å…¨å±€çŠ¶æ€
observations = env.reset()
global_state = env.get_global_state()

# è¿è¡Œä¸€ä¸ªå›åˆ
for step in range(100):
    actions = {agent_id: env.action_space.sample() 
               for agent_id in env.agent_ids}
    obs, rewards, dones, infos = env.step(actions)
    
    # è·å–å…¨å±€çŠ¶æ€
    global_state = infos['global_state']
    
    if any(dones.values()):
        break

env.close()
```

---

## ğŸ”¬ ç¯å¢ƒå¯¹æ¯”

| ç¯å¢ƒ | æ™ºèƒ½ä½“æ•° | åä½œéš¾åº¦ | è§‚å¯Ÿç»´åº¦ | åŠ¨ä½œæ•° | æ˜¯å¦å¼‚æ„ | é€šä¿¡æ”¯æŒ | ä¸»è¦æŒ‘æˆ˜ |
|------|---------|---------|---------|--------|---------|---------|---------|
| **CM** | 2-4 | â­â­ | 10-16 | 5 | å¦ | å¦ | ç©ºé—´åè°ƒ |
| **DEM** | 3 | â­â­â­â­ | ~60 | 10 | å¦ | æ˜¯ | è§’è‰²æ¶Œç°ã€åŠ¨æ€å¨èƒ |
| **HRG** | 6 | â­â­â­ | 80 | 8 | æ˜¯ | å¯é€‰ | å¼‚æ„åä½œã€èµ„æºä¼˜åŒ– |
| **MSFS** | 6 | â­â­â­ | 24 | 8 | å¦ | å¦ | ä»»åŠ¡åˆ†é…ã€æ—¶åºä¼˜åŒ– |
| **SMAC** | 3-20 | â­â­â­â­â­ | ~80 | ~14 | æ˜¯ | å¦ | æˆ˜æ–—ç­–ç•¥ã€å¾®æ“æ§åˆ¶ |

---

## ğŸ“Š æ”¯æŒçš„MARLç®—æ³•

æ‰€æœ‰ç¯å¢ƒéƒ½å…¼å®¹ä»¥ä¸‹ä¸»æµMARLç®—æ³•ï¼š

### CTDEç±»ç®—æ³•
- **QMIX**: Q-Mixing Networks
- **VDN**: Value Decomposition Networks
- **QTRAN**: Q-Transformation
- **WQMIX**: Weighted QMIX

### ç‹¬ç«‹å­¦ä¹ ç®—æ³•
- **IQL**: Independent Q-Learning
- **A3C**: Asynchronous Advantage Actor-Critic
- **PPO**: Proximal Policy Optimization

### é€šä¿¡ç®—æ³•
- **CommNet**: Communication Networks
- **TarMAC**: Targeted Multi-Agent Communication
- **IC3Net**: Individual-Collective-Learning Communication

---

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

æ¯ä¸ªç¯å¢ƒéƒ½æä¾›äº†å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# CMç¯å¢ƒæµ‹è¯•
cd Env/CM
python test_env.py

# DEMç¯å¢ƒæµ‹è¯•
cd Env/DEM
python test_env.py

# HRGç¯å¢ƒæµ‹è¯•
cd Env/HRG
python test_env.py

# MSFSç¯å¢ƒæµ‹è¯•
cd Env/MSFS
python test_env.py

# SMACç¯å¢ƒæµ‹è¯•
cd Env/SMAC
python test_env.py
```

è¿è¡Œå®Œæ•´éªŒè¯è„šæœ¬ï¼š

```bash
# éªŒè¯æ‰€æœ‰ç¯å¢ƒ
python verify_dem_environment.py
python verify_hrg_environment.py
python verify_msfs_environment.py
```

---

## ğŸ“š æ•™ç¨‹å’Œæ–‡æ¡£

æ¯ä¸ªç¯å¢ƒéƒ½æä¾›äº†è¯¦ç»†çš„Jupyteræ•™ç¨‹ï¼š

- **CM_Tutorial.ipynb**: åä½œæ¬è¿ç¯å¢ƒå®Œæ•´æ•™ç¨‹
- **DEM_environment_tutorial.ipynb**: åŠ¨æ€æŠ¤é€ä»»åŠ¡ç¯å¢ƒæ•™ç¨‹
- **HRG_Tutorial.ipynb**: å¼‚æ„èµ„æºæ”¶é›†ç¯å¢ƒæ•™ç¨‹
- **MSFS_environment_tutorial.ipynb**: æ™ºèƒ½åˆ¶é€ ç¯å¢ƒæ•™ç¨‹
- **SMAC_Wrapper_Tutorial.ipynb**: SMACå°è£…å™¨ä½¿ç”¨æ•™ç¨‹

è¯¦ç»†æ–‡æ¡£ä½äºå„ç¯å¢ƒçš„README.mdæ–‡ä»¶ä¸­ã€‚

---

## âš™ï¸ ç¯å¢ƒé…ç½®æŒ‡å—

### éš¾åº¦çº§åˆ«

æ‰€æœ‰ç¯å¢ƒéƒ½æ”¯æŒå¤šä¸ªé¢„å®šä¹‰éš¾åº¦çº§åˆ«ï¼š

- **easy**: é€‚åˆåˆå§‹è®­ç»ƒå’Œè°ƒè¯•
- **normal**: æ ‡å‡†è¯„ä¼°é…ç½®
- **hard**: æŒ‘æˆ˜æ€§é…ç½®ï¼Œç”¨äºæµ‹è¯•ç®—æ³•æé™

### è‡ªå®šä¹‰é…ç½®

æ¯ä¸ªç¯å¢ƒéƒ½æ”¯æŒè‡ªå®šä¹‰é…ç½®ï¼š

```python
from Env.CM.config import CMConfig
from Env.CM.env_cm import CooperativeMovingEnv

# åˆ›å»ºè‡ªå®šä¹‰é…ç½®
config = CMConfig(
    grid_size=9,
    n_agents=4,
    max_steps=120,
    cooperation_reward=0.03
)

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
env = CooperativeMovingEnv(config)
```

---

## ğŸ¨ å¯è§†åŒ–æ”¯æŒ

æ‰€æœ‰ç¯å¢ƒéƒ½æä¾›äº†å¯è§†åŒ–åŠŸèƒ½ï¼š

### æ–‡æœ¬æ¸²æŸ“

```python
env = create_cm_env(render_mode="human")
env.reset()
env.render()  # åœ¨ç»ˆç«¯æ˜¾ç¤ºæ–‡æœ¬æ¸²æŸ“
```

### å›¾å½¢æ¸²æŸ“

```python
env = create_dem_env(render_mode="rgb_array")
env.reset()

# ä½¿ç”¨Pygameå®æ—¶å¯è§†åŒ–
for step in range(100):
    actions = get_actions()
    env.step(actions)
    # è‡ªåŠ¨æ¸²æŸ“
```

### ä¿å­˜æ¸²æŸ“å›¾åƒ

```python
from Env.HRG.renderer import MatplotlibRenderer

renderer = MatplotlibRenderer(grid_size=10)
renderer.render(env.game_state, save_path="screenshot.png")
```

---

## ğŸ”„ æ¥å£ä¸€è‡´æ€§ä¿è¯

æ‰€æœ‰ç¯å¢ƒä¸¥æ ¼éµå¾ªä»¥ä¸‹æ¥å£è§„èŒƒï¼š

1. **reset()æ–¹æ³•**: è¿”å›è§‚å¯Ÿå­—å…¸
2. **step()æ–¹æ³•**: è¿”å›(observations, rewards, dones, infos)å››å…ƒç»„
3. **è§‚å¯Ÿæ ¼å¼**: Dict[agent_id, np.ndarray]
4. **å¥–åŠ±æ ¼å¼**: Dict[agent_id, float]
5. **å®Œæˆæ ‡å¿—**: Dict[agent_id, bool]
6. **ä¿¡æ¯å­—å…¸**: DictåŒ…å«å…¨å±€ä¿¡æ¯

è¿™ç¡®ä¿äº†ç®—æ³•ä»£ç å¯ä»¥åœ¨ä¸åŒç¯å¢ƒé—´æ— ç¼åˆ‡æ¢ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿ä¸ºç¯å¢ƒé›†åˆåšå‡ºè´¡çŒ®ï¼

### æ·»åŠ æ–°ç¯å¢ƒ

æ–°ç¯å¢ƒåº”è¯¥ï¼š
1. éµå¾ªç»Ÿä¸€æ¥å£è§„èŒƒ
2. æä¾›åŸºç¡€ç‰ˆæœ¬å’ŒCTDEç‰ˆæœ¬
3. åŒ…å«å®Œæ•´çš„é…ç½®ç³»ç»Ÿ
4. æä¾›æµ‹è¯•å¥—ä»¶
5. ç¼–å†™è¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹

### ä»£ç è§„èŒƒ

- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- æä¾›å•å…ƒæµ‹è¯•

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç ”ç©¶ç¤¾åŒºçš„æ”¯æŒå’Œè´¡çŒ®ã€‚

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡GitHub Issuesæäº¤ã€‚

---

**ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´  
**ç»´æŠ¤è€…**: Shuwei Sun
